<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeSchool Security - School Security Management System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-brand">
                <div class="brand-icon">🛡️</div>
                <div class="brand-info">
                    <h1>SafeSchool Security</h1>
                    <div class="current-status">
                        <div class="status-indicator" id="global-status"></div>
                        <span id="global-status-text">Normal</span>
                    </div>
                </div>
            </div>
            <div class="header-info">
                <div class="time-display" id="current-time"></div>
                <div class="alert-counter">
                    <span class="alert-badge" id="active-alerts-count">2</span>
                    <span>Active Alerts</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Sidebar -->
    <nav class="sidebar">
        <div class="nav-menu">
            <button class="nav-item active" data-section="dashboard">
                <span class="nav-icon">📊</span>
                <span class="nav-text">Dashboard</span>
            </button>
            <button class="nav-item" data-section="alerts">
                <span class="nav-icon">🚨</span>
                <span class="nav-text">Alerts</span>
            </button>
            <button class="nav-item" data-section="students">
                <span class="nav-icon">👥</span>
                <span class="nav-text">Students</span>
            </button>
            <button class="nav-item" data-section="zones">
                <span class="nav-icon">🏫</span>
                <span class="nav-text">Security Zones</span>
            </button>
            <button class="nav-item" data-section="emergency">
                <span class="nav-icon">🚑</span>
                <span class="nav-text">Emergency</span>
            </button>
            <button class="nav-item" data-section="reports">
                <span class="nav-icon">📈</span>
                <span class="nav-text">Reports</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
            <div class="section-header">
                <h2>Security Dashboard</h2>
                <p>Real-time overview of school security status and activities</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card safe">
                    <div class="stat-icon">👨‍🎓</div>
                    <div class="stat-info">
                        <h3 id="students-present">423</h3>
                        <p>Students Present</p>
                    </div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-icon">⚠️</div>
                    <div class="stat-info">
                        <h3 id="total-alerts">2</h3>
                        <p>Active Alerts</p>
                    </div>
                </div>
                <div class="stat-card info">
                    <div class="stat-icon">🏫</div>
                    <div class="stat-info">
                        <h3 id="zones-normal">6</h3>
                        <p>Zones Normal</p>
                    </div>
                </div>
                <div class="stat-card safe">
                    <div class="stat-icon">✅</div>
                    <div class="stat-info">
                        <h3 id="resolved-today">8</h3>
                        <p>Resolved Today</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Recent Alerts</h3>
                    <div id="recent-alerts-list" class="alerts-preview">
                        <!-- Recent alerts will be populated by JavaScript -->
                    </div>
                    <button class="btn btn--outline btn--sm" onclick="navigateToSection('alerts')">View All Alerts</button>
                </div>

                <div class="dashboard-card">
                    <h3>Security Zones Status</h3>
                    <div id="zones-status-grid" class="zones-preview">
                        <!-- Zone status will be populated by JavaScript -->
                    </div>
                    <button class="btn btn--outline btn--sm" onclick="navigateToSection('zones')">Manage Zones</button>
                </div>

                <div class="dashboard-card">
                    <h3>Quick Actions</h3>
                    <div class="quick-actions">
                        <button class="btn btn--primary btn--sm" onclick="showAddAlertModal()">Add Alert</button>
                        <button class="btn btn--secondary btn--sm" onclick="navigateToSection('students')">Check Students</button>
                        <button class="btn btn--outline btn--sm" onclick="navigateToSection('emergency')">Emergency</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Alerts Section -->
        <section id="alerts" class="section">
            <div class="section-header">
                <h2>Alert Management</h2>
                <p>Monitor and manage security alerts across the school</p>
                <button class="btn btn--primary" onclick="showAddAlertModal()">Add New Alert</button>
            </div>

            <div class="alerts-filters">
                <button class="filter-btn active" data-filter="all">All Alerts</button>
                <button class="filter-btn" data-filter="active">Active</button>
                <button class="filter-btn" data-filter="high">High Priority</button>
                <button class="filter-btn" data-filter="resolved">Resolved</button>
            </div>

            <div id="alerts-grid" class="alerts-grid">
                <!-- Alerts will be populated by JavaScript -->
            </div>
        </section>

        <!-- Students Section -->
        <section id="students" class="section">
            <div class="section-header">
                <h2>Student Safety Tracker</h2>
                <p>Monitor student attendance and safety status</p>
            </div>

            <div class="students-controls">
                <div class="search-bar">
                    <input type="text" id="student-search" class="form-control" placeholder="Search students by name or ID...">
                    <button class="btn btn--primary" onclick="searchStudents()">Search</button>
                </div>
                <div class="attendance-summary">
                    <span class="summary-item present">Present: <strong id="present-count">423</strong></span>
                    <span class="summary-item absent">Absent: <strong id="absent-count">27</strong></span>
                    <span class="summary-item late">Late: <strong id="late-count">1</strong></span>
                </div>
            </div>

            <div id="students-grid" class="students-grid">
                <!-- Students will be populated by JavaScript -->
            </div>
        </section>

        <!-- Security Zones Section -->
        <section id="zones" class="section">
            <div class="section-header">
                <h2>Security Zone Monitor</h2>
                <p>Monitor security status across different school areas</p>
            </div>

            <div id="zones-grid" class="zones-grid">
                <!-- Zones will be populated by JavaScript -->
            </div>
        </section>

        <!-- Emergency Section -->
        <section id="emergency" class="section">
            <div class="section-header">
                <h2>Emergency Response</h2>
                <p>Quick access to emergency contacts and procedures</p>
            </div>

            <div class="emergency-grid">
                <div class="emergency-card urgent">
                    <h3>Emergency Contacts</h3>
                    <div id="emergency-contacts" class="contacts-list">
                        <!-- Emergency contacts will be populated by JavaScript -->
                    </div>
                </div>

                <div class="emergency-card">
                    <h3>Quick Actions</h3>
                    <div class="emergency-actions">
                        <button class="btn btn--danger" onclick="emergencyCall('100')">🚔 Call Police</button>
                        <button class="btn btn--danger" onclick="emergencyCall('101')">🚒 Fire Department</button>
                        <button class="btn btn--danger" onclick="emergencyCall('102')">🚑 Ambulance</button>
                        <button class="btn btn--warning" onclick="initiateEvacuation()">📢 Evacuation Alert</button>
                    </div>
                </div>

                <div class="emergency-card">
                    <h3>Evacuation Procedures</h3>
                    <div class="procedures-list">
                        <div class="procedure-step">1. Sound the alarm immediately</div>
                        <div class="procedure-step">2. Guide students to nearest exit</div>
                        <div class="procedure-step">3. Assemble at designated safe areas</div>
                        <div class="procedure-step">4. Conduct headcount and report</div>
                        <div class="procedure-step">5. Wait for all-clear signal</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Reports Section -->
        <section id="reports" class="section">
            <div class="section-header">
                <h2>Reports & Analytics</h2>
                <p>Security trends and performance analytics</p>
            </div>

            <div class="reports-grid">
                <div class="report-card">
                    <h3>Security Level Trends</h3>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="securityTrendsChart"></canvas>
                    </div>
                </div>

                <div class="report-card">
                    <h3>Alert Types Distribution</h3>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="alertTypesChart"></canvas>
                    </div>
                </div>

                <div class="report-card">
                    <h3>Daily Summary</h3>
                    <div class="summary-stats">
                        <div class="summary-item">
                            <span class="summary-label">Total Incidents:</span>
                            <span class="summary-value">15</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Response Time (avg):</span>
                            <span class="summary-value">3.2 min</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Resolution Rate:</span>
                            <span class="summary-value">94%</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Student Attendance:</span>
                            <span class="summary-value">94%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Add Alert Modal -->
    <div id="add-alert-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Security Alert</h3>
                <button class="modal-close" onclick="hideAddAlertModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="add-alert-form">
                    <div class="form-group">
                        <label class="form-label">Alert Type</label>
                        <select class="form-control" id="alert-type" required>
                            <option value="">Select alert type...</option>
                            <option value="Unauthorized Access">Unauthorized Access</option>
                            <option value="Medical Emergency">Medical Emergency</option>
                            <option value="Suspicious Activity">Suspicious Activity</option>
                            <option value="Fire Safety">Fire Safety</option>
                            <option value="Security Breach">Security Breach</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Priority Level</label>
                        <select class="form-control" id="alert-priority" required>
                            <option value="">Select priority...</option>
                            <option value="High">High</option>
                            <option value="Medium">Medium</option>
                            <option value="Low">Low</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Zone</label>
                        <select class="form-control" id="alert-zone" required>
                            <option value="">Select zone...</option>
                            <option value="Main Gate">Main Gate</option>
                            <option value="Playground">Playground</option>
                            <option value="Cafeteria">Cafeteria</option>
                            <option value="Library">Library</option>
                            <option value="Computer Lab">Computer Lab</option>
                            <option value="Parking Area">Parking Area</option>
                            <option value="Administrative Block">Administrative Block</option>
                            <option value="Science Labs">Science Labs</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Alert Message</label>
                        <textarea class="form-control" id="alert-message" rows="3" placeholder="Describe the security alert..." required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn--outline" onclick="hideAddAlertModal()">Cancel</button>
                        <button type="submit" class="btn btn--primary">Create Alert</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-section">
                <h4>Emergency Hotlines</h4>
                <div class="hotlines">
                    <span>Police: 100</span>
                    <span>Fire: 101</span>
                    <span>Medical: 102</span>
                </div>
            </div>
            <div class="footer-section">
                <h4>School Contacts</h4>
                <div class="school-contacts">
                    <span>Principal: +91-9876543220</span>
                    <span>Security: +91-9876543221</span>
                </div>
            </div>
            <div class="footer-section">
                <h4>System Status</h4>
                <div class="system-status">
                    <span class="status-online">System Online</span>
                    <span>Last Updated: <span id="last-updated"></span></span>
                </div>
            </div>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>